#!/usr/bin/env python
# -*- coding: utf-8 -*-

import FSMLoader

import xmlParser

s = '<UserDiagramManager xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><NonStaticElems><LinkedDiagramElement xsi:type="UML_ActivityStartModel"><Id>5b3af7a2-53bc-4177-a4e6-88ae7362c3d2</Id><Name>Начало</Name><Description>Начало</Description></LinkedDiagramElement><LinkedDiagramElement xsi:type="UML_ActivityBranchStartModel"><Id>05b54d3b-a225-4fee-9163-70cf00b04fe4</Id><Name>Начало ветвления</Name><Description>Начало условного ветвления</Description></LinkedDiagramElement><LinkedDiagramElement xsi:type="UML_ActivityEndModel"><Id>b51c2cd8-56d5-47bd-9b5c-fe5697a041c2</Id><Name>Конец</Name><Description>Конец</Description></LinkedDiagramElement><LinkedDiagramElement xsi:type="UML_ActivityActionModel"><Id>759d97a4-f217-4dde-ab8a-29420f3b6924</Id><Name>Действие</Name><Description>Действие</Description></LinkedDiagramElement><LinkedDiagramElement xsi:type="UML_ActivityBranchEndModel"><Id>ed22795d-51a2-426b-a472-94c9894ecbf8</Id><Name>Конец ветвления</Name><Description>Конец условного ветвления</Description></LinkedDiagramElement></NonStaticElems><NonStaticLinks><Link><Id>a1652fe7-4d95-49bf-a5b0-ab3e87eceb13</Id><Source xsi:type="UML_ActivityStartModel"><Id>5b3af7a2-53bc-4177-a4e6-88ae7362c3d2</Id><Name>Начало</Name><Description>Начало</Description></Source><Sink xsi:type="UML_ActivityBranchStartModel"><Id>05b54d3b-a225-4fee-9163-70cf00b04fe4</Id><Name>Начало ветвления</Name><Description>Начало условного ветвления</Description></Sink><ConnectionType>0</ConnectionType></Link><Link><Id>991e3f89-6c5c-4d82-96e6-58fea41b1dd6</Id><Source xsi:type="UML_ActivityBranchStartModel"><Id>05b54d3b-a225-4fee-9163-70cf00b04fe4</Id><Name>Начало ветвления</Name><Description>Начало условного ветвления</Description></Source><Sink xsi:type="UML_ActivityActionModel"><Id>759d97a4-f217-4dde-ab8a-29420f3b6924</Id><Name>Действие</Name><Description>Действие</Description></Sink><ConnectionType>0</ConnectionType></Link><Link><Id>c12945f0-e021-48d1-8470-8a1a20af11da</Id><Source xsi:type="UML_ActivityActionModel"><Id>759d97a4-f217-4dde-ab8a-29420f3b6924</Id><Name>Действие</Name><Description>Действие</Description></Source><Sink xsi:type="UML_ActivityBranchEndModel"><Id>ed22795d-51a2-426b-a472-94c9894ecbf8</Id><Name>Конец ветвления</Name><Description>Конец условного ветвления</Description></Sink><ConnectionType>0</ConnectionType></Link><Link><Id>14af7920-aca9-4ac4-a173-ff55bbf94dc2</Id><Source xsi:type="UML_ActivityBranchStartModel"><Id>05b54d3b-a225-4fee-9163-70cf00b04fe4</Id><Name>Начало ветвления</Name><Description>Начало условного ветвления</Description></Source><Sink xsi:type="UML_ActivityBranchEndModel"><Id>ed22795d-51a2-426b-a472-94c9894ecbf8</Id><Name>Конец ветвления</Name><Description>Конец условного ветвления</Description></Sink><ConnectionType>0</ConnectionType></Link><Link><Id>b2f679e0-3dad-4ec3-9137-a867ddf069b7</Id><Source xsi:type="UML_ActivityBranchEndModel"><Id>ed22795d-51a2-426b-a472-94c9894ecbf8</Id><Name>Конец ветвления</Name><Description>Конец условного ветвления</Description></Source><Sink xsi:type="UML_ActivityEndModel"><Id>b51c2cd8-56d5-47bd-9b5c-fe5697a041c2</Id><Name>Конец</Name><Description>Конец</Description></Sink><ConnectionType>0</ConnectionType></Link></NonStaticLinks></UserDiagramManager>'
s = '<UserDiagramManager xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">  <NonStaticElems>    <LinkedDiagramElement xsi:type="UML_ActivityStartModel">      <Id>e5a65640-346b-4ab3-8c5f-63385a179ebd</Id>      <Name>Ќачало</Name>      <Description>Ќачало</Description>    </LinkedDiagramElement>    <LinkedDiagramElement xsi:type="UML_ActivityEndModel">      <Id>29d31804-08b8-4fbb-a142-01a0d4a9b081</Id>      <Name> онец</Name>      <Description> онец</Description>    </LinkedDiagramElement>    <LinkedDiagramElement xsi:type="UML_ActivityBranchStartModel">      <Id>7f0bea71-c708-4ce8-913a-6eb0d276679a</Id>      <Name>Ќачало ветвлени€</Name>      <Description>Ќачало условного ветвлени€</Description>    </LinkedDiagramElement>    <LinkedDiagramElement xsi:type="UML_ActivityBranchEndModel">      <Id>73391059-4d9e-48f6-bbbc-41a56906285b</Id>      <Name> онец ветвлени€</Name>      <Description> онец условного ветвлени€</Description>    </LinkedDiagramElement>    <LinkedDiagramElement xsi:type="UML_ActivityActionModel">      <Id>f35c06ea-03fa-4b87-aa88-7a513ebd917f</Id>      <Name>ƒействие</Name>      <Description>ƒействие</Description>    </LinkedDiagramElement>  </NonStaticElems>  <NonStaticLinks>    <Link>      <Id>dfde5a28-d7a8-4830-a9ce-978ea80bea96</Id>      <Source xsi:type="UML_ActivityStartModel">        <Id>e5a65640-346b-4ab3-8c5f-63385a179ebd</Id>        <Name>Ќачало</Name>        <Description>Ќачало</Description>      </Source>      <Sink xsi:type="UML_ActivityBranchStartModel">        <Id>7f0bea71-c708-4ce8-913a-6eb0d276679a</Id>        <Name>Ќачало ветвлени€</Name>        <Description>Ќачало условного ветвлени€</Description>      </Sink>      <ConnectionType>0</ConnectionType>    </Link>    <Link>      <Id>8fe9f951-4c1d-4ec7-a859-803cb2250cc0</Id>      <Source xsi:type="UML_ActivityBranchStartModel">        <Id>7f0bea71-c708-4ce8-913a-6eb0d276679a</Id>        <Name>Ќачало ветвлени€</Name>        <Description>Ќачало условного ветвлени€</Description>      </Source>      <Sink xsi:type="UML_ActivityActionModel">        <Id>f35c06ea-03fa-4b87-aa88-7a513ebd917f</Id>        <Name>ƒействие</Name>        <Description>ƒействие</Description>      </Sink>      <ConnectionType>0</ConnectionType>    </Link>    <Link>      <Id>f1bc88bc-5dd4-49f4-b787-e2db56bc4314</Id>      <Source xsi:type="UML_ActivityActionModel">        <Id>f35c06ea-03fa-4b87-aa88-7a513ebd917f</Id>        <Name>ƒействие</Name>        <Description>ƒействие</Description>      </Source>      <Sink xsi:type="UML_ActivityBranchEndModel">        <Id>73391059-4d9e-48f6-bbbc-41a56906285b</Id>        <Name> онец ветвлени€</Name>        <Description> онец условного ветвлени€</Description>      </Sink>      <ConnectionType>0</ConnectionType>    </Link>    <Link>      <Id>cf8ae3e6-5b97-42cc-ab6e-47c66be04eb8</Id>      <Source xsi:type="UML_ActivityBranchEndModel">        <Id>73391059-4d9e-48f6-bbbc-41a56906285b</Id>        <Name> онец ветвлени€</Name>        <Description> онец условного ветвлени€</Description>      </Source>      <Sink xsi:type="UML_ActivityEndModel">        <Id>29d31804-08b8-4fbb-a142-01a0d4a9b081</Id>        <Name> онец</Name>        <Description> онец</Description>      </Sink>      <ConnectionType>0</ConnectionType>    </Link>  </NonStaticLinks></UserDiagramManager>'
d = xmlParser.XmlUtil.readXml(s)

d.startWith('A0')

loader = FSMLoader.FSMLoader()
fsm = loader.load("Activity")

er = d.check(fsm)
fsm.debug()


